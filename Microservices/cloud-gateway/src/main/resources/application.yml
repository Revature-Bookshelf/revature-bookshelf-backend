server:
    port: 9500

spring:
   application:
      name: API-GATEWAY
   cloud:
      gateway:
         routes:
            - id: USER-SERVICE
              uri: lb://USER-SERVICE
              predicates:
                 - Path=/users/**
              filters:
                - name: CircuitBreaker
                  args:
                     name: USER-SERVICE
                     fallbackuri: forward:/userServiceFallBack

            - id: BOOK-SERVICE
              uri: lb://BOOK-SERVICE
              predicates:
                 - Path=/books/**
              filters:
                - name: CircuitBreaker
                  args:
                    name: BOOK-SERVICE
                    fallbackuri: forward:/bookServiceFallBack

            - id: CART-SERVICE
              uri: lb://CART-SERVICE
              predicates: 
                 - Path=/cart/**
                 - Path=/order/**
              filters:
                - name: CircuitBreaker
                  args:
                    name: CART-SERVICE
                    fallbackuri: forward:/cartServiceFallBack
hystrix:
   command:
      fallbackcmd:
         excution:
            isolation:
               thread:
                  timeoutInMilliseconds: 5000

management:
  endpoints:
    web:
      exposure:
        include: hystrix.stream

eureka:
  client:
    register-with-eureka: true
    fetch-registry: true
    service-url: 
       defaultZone: http://localhost:8761/eureka/
  instance:
    hostname: localhost